package test_1;

import junit.framework.Assert;
import org.junit.Test;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;

import java.util.ArrayList;
import java.util.concurrent.TimeUnit;

/**
 * First test for QA2 clacces.
 * Opening javaguru.lv homepage
 */

public class MainPageOpenTest {
    private String HOME_PAGE = "http://javaguru.lv";
    private static final By QA_COURSE_MENU_LINK = By.xpath(".//span[text()='Курс Тестирования(QA)']");
    private static final By QA_REGISTRATION_BTN = By.className("regCourseA");
    private static final By SEND_BTN = By.id("ss-submit");
    private static final By NAME_FIELD = By.id("entry_1000000");

    @Test
    public void firstTest() throws InterruptedException {
        System.setProperty("webdriver.gecko.driver", "C:/geckodriver.exe");
        WebDriver driver = new FirefoxDriver();
//      Implicit Wait - НЕ явные ожидания. Многократные попытки найти элемент на странице и только потом показать ошибку
//      ElementNotFoundException
        driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
        driver.manage().window().maximize();
        driver.get(HOME_PAGE);
        driver.findElement(QA_COURSE_MENU_LINK).click();
        driver.findElement(QA_REGISTRATION_BTN).click();
//      создаём массив с кол-вом табов
        ArrayList<String> tabs = new ArrayList<String>();
        while (tabs.size() != 2) {
            tabs.clear();
            tabs.addAll(driver.getWindowHandles());
        }
        driver.switchTo().window(tabs.get(1));
        Thread.sleep(10000); /*говорят что так делать не надо. Это является Explicit Wait, т.е. мы ждём когда наступит
        какое-либо событие -> Thread.sleep - просто останавливает исполнение программы в данном случае на 10 секунд. */
        driver.findElement(NAME_FIELD).sendKeys("name");
        driver.findElement(SEND_BTN).click();
        driver.quit();
    }
}
